<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Document</title>
	<link rel="stylesheet" href="stylesheets/docco.css">
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript">

	addStylesToCodeLines = function(comment) {
		match = $(comment).html().match(/\[(.*)\]/);

		if(match !== null && match.length >= 1){
			line = $(comment).parent('.one-line');
      // Remove the comment and trailing whitespace.
      $(line).find('.c1').remove().end().html($(line).html().replace(/\s*$/,''));
      // Split any styles by commas.
			styles = match[1].split(',');
			for( l = 0; l < styles.length; l++) {
				if(styles[l].trim() === 'bold') {
					line.html("<strong>" + line.html() + "</strong>");
				} else if (styles[l].trim() === 'italic') {
					line.html("<em>" + line.html() + "</em>");
				} else {
					line.addClass(styles[l].trim());
				}
			}
		}
	}

	$(document).ready(function(){
    $('.c1').each(function(){
      addStylesToCodeLines($(this));
    });

		$('.code-comment-pair').each(function(){
			pair = $(this);
			line = $(pair.find('.code-comment-line'));
			firstCodeLine = $(pair.find('.one-line')[0]);
			firstElement = $(firstCodeLine.find('span')[0]);
			line.css('position','absolute');
      // line.css('top',(firstCodeLine.position().top + firstCodeLine.height()) +'px');
			if(0 != firstElement.length){
				line.css('left', firstElement.position().left + 'px');
				line.css('width', $(pair).width() - firstElement.position().left);
			}
		});
	});
	</script>
	<script type="text/javascript" src="processingjs/processing.js"></script>
	<link rel="stylesheet" href="stylesheets/html.css" type="text/css">
</head>
<body>
	<div id="container">
		<%= render_children(views, filter_results) %>
	</div>
</body>
</html>